<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Javascript Quiz Challenge</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
        <link rel="stylesheet" type="text/css" href="css/style.css">
        <link href="https://fonts.googleapis.com/css?family=Cardo" rel="stylesheet">
</head>
<body>  
    <div class="quizContainer">
        <div class="sidebars" id="sidebar1"></div>
            <div class="sidebars" id="sidebar2">
                <h1>Harry Potter Quiz</h1>
                    <h4> How well do you know Harry Potter? Take the quiz below to find out!</h4> 
                    <form>
                        <div>
                            <div id="quiz"></div>
                            <div id="quizBlock"></div>
                        </div>
                    </form>
                </div>
                <div id="score"></div>
            </div>
    </div>

    <script>
        //array of quiz questions, options and answers
        let questions =  [
                        {question: "What is the name of Harry Potter's owl?",
                        options: ["Hedwig","Hogwarts","Harriet","Hagrid"],
                        answer: "A",
                        },
                        { question: "What do Hermione's parents do for a living?",
                        options: ["Lawyers","Dentists","Artists","Doctors"],
                        answer: "B",
                        },
                        { question: "Who killed Cedric Diggory?",
                        options: ["Cho Chang","Professor Umbridge","Peter Pettigrew","Draco Malfoy"],
                        answer: "C",
                        },
                        { question: "Who is Tom Marvolo Riddle?",
                        options: [ "Rubeus Hagrid","Newt Scamander","Barty Crouch Jr.","Lord Voldemort"],
                        answer: "D",
                        },
                        { question: "What guards Azkaban Prison?",
                        options: [ "Elves","Dementors","Dragons","Boggarts"],
                        answer: "B",
                        },
                        { question: "Who is the second oldest Weasley?",
                        options: [ "Bill","Percy","Charlie","Ron"],
                        answer: "C",
                        },
                        { question: "Which of these is not an Unforgivable Curse?",
                        options: [ "Avada Kedavra","Crucio","Imperio","Revelio"],
                        answer: "D",
                        },
                        { question: "What is the name of the Black Family house elf?",
                        options: [ "Kreacher","Dobby","Elfie","Sirius"],
                        answer: "A",
                        },
                        { question: "What spell is used to help get rid of a boggart?",
                        options: [ "Wingardium Leviosa","Avada Kedava","Riddikulos","Expelliamus"],
                        answer: "C",
                        },
                        { question: "Which two teams played in the 422nd Quiddicth World Cup?",
                        options: [ "Austria vs New Zealand","Switzerland vs Denmark","Belgium vs Ivory Coast","Bulgaria vs Ireland"],
                        answer: "D",
                        },
                        { question: "Who was the first person petrified in Chamber of Secrets book?",
                        options: [ "Hermione Granger","Penelope Clearwater","Luna Lovegood","Colin Creevey"],
                        answer: "B",
                        },
                        { question: "What is a squib?",
                        options: [ "A magical person who has non-magical parents","A type of plant for a healing potion","Non-magical person who is born to at least one magical parent","A wand made from a special type of wood"],
                        answer: "C",
                        },
                        { question: "What is Nearly Headless Nick's real name?",
                        options: [ "Nicholas de Mimsy-Poppington","Nick Popped Poppington","Nicholas Nearless Poppington","Nicholas de Memsy-Porpington"],
                        answer: "A",
                        },
                        { question: "Who below is a Death Eater?",
                        options: [ "Remus Lupin","Fenrir Greyback","Molly Weasley","Nymphodora Tonks"],
                        answer: "B",
                        },
                        { question: "How do you free a house elf?",
                        options: [ "You give the elf a hug","You give them a can of food","You give them an item of clothing","You give them a pat on the head"],
                        answer: "C",
                        },
                        { question: "What is Hogwart's Motto?",
                        options: [ "Ante Deum Asto","Never tickle a sleeping dragon","Audemus jura nostra defendere","Giggling dragons are full of fun"],
                        answer: "B",
                        },
                        { question: "What is an animagus?",
                        options: [ "A witch or wizard who can’t morph him or herself into an animal at will","Latin word for animal", "A witch or wizard who can morph him or herself into an animal at will","A type of animal fungus used to make potions"],
                        answer: "C",
                        },
                        { question: "What is the name of the mirror where you see what you most desire?",
                        options: [ "Mirror of True Reflections","Mirror of Erised","Mirror of Cupidine Speculum","The mirror does not exist"],
                        answer: "B",
                        },
                        { question: "Which of these is not a Horcrux?",
                        options: [ "Godric Gryffindor's Sword","Nagini the snake","Tom Riddle’s Diary","Rowena Ravenclaw’s"],
                        answer: "A",
                        },
                        { question: "What creature is the emblem for Hufflepuff House?",
                        options: [ "A lion","A badger","A raven","A squirrel"],
                        answer: "B",
                        },
                        ];
    
        console.log(questions.length);
        let ques = document.getElementById("quiz");
        console.log(ques);

        // function showQuiz to display quiz
        function showQuiz () {  
        //for loop for yo display quiz questions and radio button options  
        for (let i = 0; i < questions.length; i++) {
            //variables for quiz questions, quiz options, and array for radio button value options.
            let quizQuestions = questions[i].question[i];
            let optionA = questions[i].options[0];
            let optionB = questions[i].options[1];
            let optionC = questions[i].options[2];
            let optionD = questions[i].options[3];
            let optionsArray = ['A', 'B', 'C', 'D'];

            //for loop to display radio buttons for quiz
            for (let r = 0; r < optionsArray.length; r++) {
            
                let radioBtns = document.createElement("input");

                //creating radio buttons to be used in quiz to display answer options
                radioBtns.setAttribute('type', 'radio');
                radioBtns.setAttribute('name', questions[i].question);
                radioBtns.setAttribute('value', optionsArray[+r]);
                radioBtns.innerHTML = questions[i].question;
            }

                //creating div that will be container for quiz
                let mainQuizContainer = document.createElement('div');
                mainQuizContainer.setAttribute('class', 'quizQuestionContainer');
                
                //"blocks" in the quiz container that will house the question and questions options
                let quizBlocks = '';

                quizBlocks += '<h3>' + questions[i].question + '</h3>';
                quizBlocks += '<input type="radio" name="option[' + i + ']" value = "A">' + optionA + '</br>';
                quizBlocks += '<input type="radio" " name="option[' + i +']" value = "B">' + optionB + '</br>';
                quizBlocks += '<input type="radio" name="option[' + i +']" value = "C">' + optionC + '</br>';
                quizBlocks += '<input type="radio" name="option[' + i +']" value = "D">' + optionD + '</br>';
                mainQuizContainer.innerHTML = quizBlocks;
                ques.appendChild(mainQuizContainer);
            }
        }

        showQuiz();

        function calculateScore () {
            //create button user will press to submit their score
            let submitBtn = document.createElement("input");
            submitBtn.setAttribute('type', 'button');
            submitBtn.setAttribute('value', 'Submit Quiz');
            submitBtn.setAttribute('id', 'submitBtn');
            document.body.appendChild(submitBtn);
        
            submitBtn.addEventListener('click', function () {
            //variables to store user's choices (userResponses) , user score (score), and results (collect the score of each correct question answered.)
            let userResponses = {};
            let score = 0
            let results = document.querySelectorAll(":checked")
            console.log(results);
            //for loop to loop through all the users submitted answers and see if they match the answer of of the question
            let quizQuestionContainers = document.getElementsByClassName('quizQuestionContainer');
            for (let i = 0; i < quizQuestionContainers.length - 1; i++) {
                console.log(results[i])
                if (results[i].value == questions[i].answer) {
                score++;
                };
            }
            //output score to user
            document.getElementById('score').innerHTML = "<h3> You scored "+ score + " " + "out of 20";
        });
        }

        calculateScore();

    </script>
</body>
</html>